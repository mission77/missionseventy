<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preload" as="image" href="logoz.png">
  <title>Mission Seventy — Making What Matters Work</title>
  
  <meta property="og:type" content="website">
  <meta property="og:title" content="Mission Seventy">
  <meta property="og:description" content="Observations on faith, building, and finding solutions.">
  <meta property="og:image" content="https://missionseventy.com/logoz.png">
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D1KZK5NV5L"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-D1KZK5NV5L');
  </script>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="217b616f-3ce0-43cb-bb93-1dc5d77f1d18"></script>
  
  <style>
    /* --- CSS RESET & VARIABLES --- */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --bg: #fafafa;
      --sidebar-bg: #ffffff;
      --accent: #FDB515;
      --text: #1a1a1a;
      --text-muted: #666;
      --border: #e5e5e5;
      --hover: #f5f5f5;
    }
    body { font-family: Georgia, 'Times New Roman', serif; background: var(--bg); color: var(--text); line-height: 1.6; }
    
    /* --- LAYOUT --- */
    .container { display: grid; grid-template-columns: 300px 1fr; min-height: 100vh; max-width: 1400px; margin: 0 auto; }
    
    /* --- SIDEBAR --- */
    .sidebar { background: var(--sidebar-bg); border-right: 1px solid var(--border); padding: 40px 30px; position: sticky; top: 0; height: 100vh; display: flex; flex-direction: column; gap: 24px; overflow-y: auto; z-index: 100; }
    .logo-section { text-align: center; margin-bottom: 20px; cursor: pointer; }
    .logo-section img { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin-bottom: 15px; }
    .logo-text h1 { font-size: 16px; font-weight: 700; font-family: -apple-system, sans-serif; letter-spacing: -0.5px; margin-bottom: 4px; }
    .logo-text p { font-size: 12px; color: var(--text-muted); font-family: -apple-system, sans-serif; }

    /* --- NAV BUTTONS --- */
    .nav-tabs { display: flex; flex-direction: column; gap: 8px; margin-bottom: 10px; }
    .nav-tab { padding: 12px 16px; background: transparent; border: 1px solid transparent; border-radius: 6px; font-size: 13px; font-weight: 700; letter-spacing: 0.5px; color: var(--text-muted); cursor: pointer; text-align: left; font-family: -apple-system, sans-serif; transition: all 0.2s; text-transform: uppercase; }
    .nav-tab:hover { background: var(--hover); color: var(--text); }
    .nav-tab.active { background: #fff; border-color: var(--border); color: #000; box-shadow: 0 2px 5px rgba(0,0,0,0.03); }
    
    /* --- SIDEBAR WIDGETS --- */
    .search-box input, .subscribe-section input { width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 4px; font-family: -apple-system, sans-serif; font-size: 14px; margin-bottom: 8px; }
    .search-box input:focus, .subscribe-section input:focus { outline: none; border-color: var(--accent); }
    .subscribe-section h3, .connect-section h3 { font-size: 12px; font-weight: 700; margin-bottom: 10px; font-family: -apple-system, sans-serif; text-transform: uppercase; color: var(--text-muted); letter-spacing: 0.5px; }
    .subscribe-btn { width: 100%; padding: 10px; background: var(--text); color: #fff; border: none; border-radius: 4px; font-weight: 700; font-size: 13px; cursor: pointer; font-family: -apple-system, sans-serif; }
    .subscribe-btn:hover { background: var(--accent); color: #000; }
    
    .social-links { display: flex; gap: 10px; margin-top: 5px; }
    .social-link { width: 32px; height: 32px; background: var(--hover); color: var(--text); border-radius: 4px; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
    .social-link:hover { background: var(--accent); color: #fff; }
    .social-link svg { width: 16px; height: 16px; fill: currentColor; }

    /* --- MOBILE HEADER --- */
    .mobile-header { display: none; position: fixed; top: 0; left: 0; right: 0; background: var(--sidebar-bg); z-index: 900; padding: 10px 16px; border-bottom: 1px solid var(--border); }
    .header-top { display: flex; align-items: center; justify-content: space-between; }
    .header-logo { display: flex; align-items: center; gap: 10px; }
    .header-logo img { width: 32px; height: 32px; border-radius: 50%; }
    .mobile-menu-toggle { background: none; border: none; font-size: 24px; cursor: pointer; }
    .nav-tabs-mobile { display: flex; gap: 10px; margin-top: 10px; overflow-x: auto; padding-bottom: 5px; }
    .nav-tabs-mobile .nav-tab { white-space: nowrap; padding: 6px 12px; font-size: 11px; }

    /* --- MAIN CONTENT AREA --- */
    .main-content { padding: 60px 80px; overflow-y: auto; max-width: 900px; }
    .date-header { margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid var(--border); }
    .date-header.hidden { display: none; }
    .hijri-date { font-size: 20px; font-weight: 700; color: var(--text); font-family: Georgia, serif; }
    .gregorian-date { font-size: 13px; color: var(--text-muted); font-family: -apple-system, sans-serif; margin-top: 4px; }
    
    /* HERO SECTION */
    .hero { margin-bottom: 60px; padding-bottom: 40px; border-bottom: 1px solid var(--border); }
    .hero h2 { font-size: 36px; line-height: 1.2; margin-bottom: 16px; font-weight: 700; }
    .hero p { font-size: 18px; color: var(--text-muted); max-width: 600px; line-height: 1.6; }
    
    /* FEATURED PRODUCT CARD */
    .featured-product { background: #fff; border: 2px solid var(--accent); border-radius: 8px; padding: 30px; margin-bottom: 50px; position: relative; }
    .featured-tag { position: absolute; top: 0; right: 0; background: var(--accent); color: #000; font-size: 10px; font-weight: 800; padding: 6px 12px; font-family: -apple-system, sans-serif; border-bottom-left-radius: 8px; }
    .featured-product h3 { font-family: -apple-system, sans-serif; font-size: 22px; margin-bottom: 8px; font-weight: 700; }
    .featured-product .tagline { font-size: 14px; font-weight: 600; color: #8a6200; margin-bottom: 12px; font-family: -apple-system, sans-serif; text-transform: uppercase; }
    .featured-product p { font-size: 16px; color: var(--text-muted); margin-bottom: 20px; font-family: -apple-system, sans-serif; }
    .buy-btn-small { display: inline-block; padding: 8px 16px; background: #000; color: #fff; text-decoration: none; border-radius: 4px; font-weight: 700; font-family: -apple-system, sans-serif; font-size: 13px; transition: 0.2s; }
    .buy-btn-small:hover { background: var(--accent); color: #000; }

    /* POST LIST (FEED) */
    .section-label { font-family: -apple-system, sans-serif; font-size: 12px; font-weight: 800; text-transform: uppercase; letter-spacing: 1px; color: var(--text-muted); margin-bottom: 30px; display: block; }
    
    .post-list-item { margin-bottom: 40px; cursor: pointer; padding-bottom: 30px; border-bottom: 1px solid var(--border); transition: transform 0.2s; }
    .post-list-item:hover { transform: translateX(5px); }
    .post-list-item:last-child { border-bottom: none; }
    .post-list-item h2 { font-size: 26px; margin-bottom: 10px; color: var(--text); font-family: Georgia, serif; line-height: 1.3; }
    .post-list-item:hover h2 { color: var(--accent); }
    .post-list-item .meta { font-family: -apple-system, sans-serif; font-size: 12px; color: var(--text-muted); text-transform: uppercase; font-weight: 600; margin-bottom: 8px; }
    .post-list-item .excerpt { font-size: 16px; color: #555; line-height: 1.6; }

    /* SINGLE POST VIEW */
    .single-post-content { display: none; animation: fadeIn 0.3s ease; }
    .single-post-content.active { display: block; }
    .single-post-header h1 { font-size: 42px; line-height: 1.2; margin-bottom: 20px; font-family: Georgia, serif; }
    .single-post-meta { font-size: 13px; color: var(--text-muted); font-family: -apple-system, sans-serif; margin-bottom: 30px; text-transform: uppercase; font-weight: 600; }
    .single-post-body { font-size: 19px; line-height: 1.8; margin-bottom: 50px; }
    .single-post-body p { margin-bottom: 24px; }
    .action-btn { background: var(--hover); border: none; padding: 10px 20px; font-weight: 700; cursor: pointer; margin-bottom: 30px; border-radius: 4px; font-size: 12px; font-family: -apple-system, sans-serif; display: inline-flex; align-items: center; gap: 6px; }
    .action-btn:hover { background: var(--border); }

    /* SHARE ICONS */
    .share-icons { display: flex; gap: 8px; margin-top: 30px; padding-top: 30px; border-top: 1px solid var(--border); }
    .share-icon { width: 36px; height: 36px; background: var(--text); color: white; border-radius: 4px; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
    .share-icon:hover { background: var(--accent); color: #000; }

    /* PAGES (About/Projects) */
    .about-content, .projects-content, .search-results-page { display: none; }
    .about-content.active, .projects-content.active, .search-results-page.active { display: block; animation: fadeIn 0.3s ease; }
    .posts-content { display: none; }
    .posts-content.active { display: block; }

    .about-text, .project-card { background: white; border: 1px solid var(--border); border-radius: 8px; padding: 32px; margin-bottom: 24px; }
    .about-text h2, .project-card h3 { font-size: 28px; margin-bottom: 20px; font-family: Georgia, serif; }
    .project-card .tagline { color: var(--accent); font-weight: 700; font-family: -apple-system, sans-serif; margin-bottom: 16px; text-transform: uppercase; font-size: 13px; }
    
    /* MODALS */
    .subscribe-modal, .thank-you-modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); z-index: 1000; align-items: center; justify-content: center; }
    .subscribe-modal.active, .thank-you-modal.active { display: flex; }
    .subscribe-content, .thank-you-content { background: white; padding: 40px; border-radius: 8px; max-width: 500px; width: 90%; text-align: center; }
    .subscribe-content h2 { margin-bottom: 10px; font-family: Georgia, serif; }

    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* RESPONSIVE */
    @media (max-width: 968px) {
      .container { grid-template-columns: 1fr; }
      .sidebar { position: fixed; left: -100%; width: 280px; transition: left 0.3s ease; box-shadow: 5px 0 15px rgba(0,0,0,0.1); }
      .sidebar.active { left: 0; }
      .mobile-header { display: block; }
      .main-content { padding: 120px 20px 40px 20px; }
      .hero h2 { font-size: 28px; }
      .single-post-header h1 { font-size: 32px; }
    }
  </style>
</head>
<body>

  <header class="mobile-header" id="mobileHeader">
    <div class="header-top">
      <div class="header-logo" id="mobileLogoSection">
        <img src="logoz.png" alt="Mission Seventy">
        <span style="font-weight: 700; font-family: -apple-system, sans-serif; font-size: 14px;">Mission Seventy</span>
      </div>
      <button class="mobile-menu-toggle" id="mobileMenuToggle">☰</button>
    </div>
    <div class="nav-tabs-mobile" id="navTabsMobile">
      </div>
  </header>

  <div class="container">
    <aside class="sidebar" id="sidebar">
      <div class="logo-section" id="logoSection">
        <img src="logoz.png" alt="Mission Seventy Logo">
        <div class="logo-text">
          <h1>Mission Seventy</h1>
          <p>Making What Matters Work</p>
        </div>
      </div>

      <div class="nav-tabs" id="navTabsDesktop">
        <button class="nav-tab active" data-tab="blog">Read</button>
        <button class="nav-tab" data-tab="project">Projects</button>
        <button class="nav-tab" data-tab="about">About</button>
      </div>

      <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search...">
      </div>

      <div class="subscribe-section">
        <h3>Join the list</h3>
        <input type="email" id="sidebarEmail" placeholder="your@email.com">
        <button class="subscribe-btn" id="subscribeBtn">Subscribe</button>
      </div>

      <div class="connect-section">
        <h3>Connect</h3>
        <div class="social-links">
          <a href="https://www.instagram.com/missionseventy" target="_blank" class="social-link"><svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>
          <a href="https://twitter.com/missionseventy" target="_blank" class="social-link"><svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
        </div>
      </div>
    </aside>

    <main class="main-content">
      
      <div class="date-header" id="dateHeader">
        <div class="hijri-date" id="hijriDate"></div>
        <div class="gregorian-date" id="gregorianDate"></div>
      </div>

      <div class="search-results-page" id="searchResultsPage">
        <h2>Search Results</h2>
        <div id="searchResultsList"></div>
      </div>

      <div class="posts-content active" id="postsSection">
        
        <div class="hero">
          <h2>Practical tools for faith-driven builders.</h2>
          <p>Mission Seventy is a laboratory for making what matters work. Exploring the intersection of Islam, productivity, and modern software.</p>
        </div>

        <div class="featured-product">
          <div class="featured-tag">POPULAR</div>
          <h3>The Seventy System</h3>
          <div class="tagline">Never wonder what to post again</div>
          <p>The content creation framework that powers consistent, high-quality posts. 7 content pillars × 11 formats.</p>
          <a href="https://gumroad.com/your-link" target="_blank" class="buy-btn-small">Get the Framework - $21</a>
        </div>

        <span class="section-label">Latest Writing</span>
        <div class="posts-feed" id="postsFeed">
          </div>
      </div>

      <div class="single-post-content" id="singlePostView">
        <button class="action-btn" id="backBtn">← Back to Feed</button>
        <div class="single-post-header">
          <h1 id="singlePostTitle"></h1>
        </div>
        <div class="single-post-meta" id="singlePostDate"></div>
        <div class="single-post-body" id="singlePostBody"></div>
        
        <div class="share-icons">
          <a href="#" class="share-icon" id="shareFacebook2"><svg viewBox="0 0 24 24"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg></a>
          <a href="#" class="share-icon" id="shareTwitter2"><svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
        </div>
      </div>

      <div class="about-content" id="aboutSection">
        <div class="about-text">
          <h2>About Mission Seventy</h2>
          <p>BISMILLAH.</p>
          <p>Mission Seventy is my laboratory for making what matters work. This blog is where I share observations on faith, building, and finding solutions.</p>
          <p>As a builder, I write to think clearly. To see ideas in the open. To refine them. Here you'll find finished projects, upcoming work, and resources; some free, some paid.</p>
        </div>
      </div>

      <div class="projects-content" id="projectsSection">
        <div class="project-card">
          <h3>Qiblatak.com</h3>
          <div class="tagline">Your private Qibla compass</div>
          <p>A web app helping Muslims find the Qibla direction from anywhere. Minimal design that respects your focus.</p>
          <a href="https://qiblatak.com" target="_blank" class="buy-btn-small">Visit Site</a>
        </div>
        
        <div class="project-card">
          <h3>Nurayni.com</h3>
          <div class="tagline">Nurturing Iman through the two lights</div>
          <p>Authentic Islamic wisdom from the Quran and Sunnah. Daily reflections and practical guidance.</p>
          <span style="background:#333; color:#fff; padding:4px 8px; border-radius:4px; font-size:12px;">Coming Soon</span>
        </div>
      </div>

    </main>
  </div>

  <div class="subscribe-modal" id="subscribeModal">
    <div class="subscribe-content">
      <h2>Subscribe to Mission Seventy</h2>
      <p>Get daily insights delivered to your inbox.</p>
      <input type="email" id="emailInput" placeholder="your@email.com">
      <button class="subscribe-btn" id="submitSubscribe">Sign Up</button>
      <button class="action-btn" id="closeSubscribe" style="margin-top:10px; width:100%; justify-content: center;">Close</button>
    </div>
  </div>

  <div class="thank-you-modal" id="thankYouModal">
    <div class="thank-you-content">
      <div style="font-size: 40px; margin-bottom:10px;">✓</div>
      <h2>Welcome!</h2>
      <p>Check your email for confirmation.</p>
      <button class="action-btn" id="closeThankYou">Done</button>
    </div>
  </div>

  <script src="posts.js"></script>
  <script>
    // --- APP STATE ---
    const postsFeed = document.getElementById('postsFeed');
    const subscribeModal = document.getElementById('subscribeModal');
    const searchInput = document.getElementById('searchInput');
    const navTabsDesktop = document.querySelectorAll('#navTabsDesktop .nav-tab');
    const postsSection = document.getElementById('postsSection');
    const aboutSection = document.getElementById('aboutSection');
    const projectsSection = document.getElementById('projectsSection');
    const singlePostView = document.getElementById('singlePostView');
    const searchResultsPage = document.getElementById('searchResultsPage');
    const sidebar = document.getElementById('sidebar');
    const logoSection = document.getElementById('logoSection');
    const dateHeader = document.getElementById('dateHeader');
    const mobileHeader = document.getElementById('mobileHeader');
    const mobileLogoSection = document.getElementById('mobileLogoSection');
    const navTabsMobile = document.getElementById('navTabsMobile');
    let currentPostId = null;

    // --- RENDER LOGIC (UPDATED FOR FEED) ---
    function renderPosts() {
      postsFeed.innerHTML = '';
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      
      // Filter future posts & sort by date
      if (typeof posts === 'undefined') return; // Safety check

      const sortedPosts = [...posts].filter(post => {
        const dateStr = post.date.split(' / ')[1];
        const postDate = new Date(dateStr);
        postDate.setHours(0, 0, 0, 0);
        return postDate <= today;
      }).sort((a, b) => {
        const dateA = new Date(a.date.split(' / ')[1]);
        const dateB = new Date(b.date.split(' / ')[1]);
        return dateB - dateA;
      });
      
      if (sortedPosts.length === 0) {
        postsFeed.innerHTML = '<p style="color: var(--text-muted);">No posts yet.</p>';
        return;
      }
      
      sortedPosts.forEach(post => {
        const item = document.createElement('div');
        item.className = 'post-list-item';
        // Only show Title + Date + Excerpt
        item.innerHTML = `
          <div class="meta">${post.date}</div>
          <h2>${post.title}</h2>
          <div class="excerpt">${post.excerpt}</div>
        `;
        item.addEventListener('click', () => openSinglePost(post));
        postsFeed.appendChild(item);
      });
    }

    // --- VIEW SINGLE POST ---
    function openSinglePost(post) {
      currentPostId = post.id;
      
      // Hide Feed, Show Single
      postsSection.classList.remove('active'); // Hides Hero + Feed
      searchResultsPage.classList.remove('active');
      singlePostView.classList.add('active');
      dateHeader.classList.add('hidden');
      
      // Inject Content
      document.getElementById('singlePostTitle').textContent = post.title;
      document.getElementById('singlePostDate').textContent = post.date;
      document.getElementById('singlePostBody').innerHTML = post.body;
      
      // URL & Meta Updates
      window.history.pushState({postId: post.id}, post.title, `?post=${post.id}`);
      window.scrollTo(0, 0);
      
      // Setup Share Links
      const postUrl = window.location.href;
      document.getElementById('shareFacebook2').href = `https://www.facebook.com/sharer/sharer.php?u=${postUrl}`;
      document.getElementById('shareTwitter2').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(post.title)}&url=${encodeURIComponent(postUrl)}`;
    }

    function closeSinglePost() {
      singlePostView.classList.remove('active');
      postsSection.classList.add('active'); // Shows Hero + Feed again
      dateHeader.classList.remove('hidden');
      window.scrollTo(0, 0);
      window.history.pushState({}, '', window.location.pathname);
    }

    // --- NAVIGATION TABS ---
    function handleTabClick(tabName, btn) {
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
      if (btn) btn.classList.add('active');
      
      // Reset all views
      postsSection.classList.remove('active');
      aboutSection.classList.remove('active');
      projectsSection.classList.remove('active');
      singlePostView.classList.remove('active');
      searchResultsPage.classList.remove('active');
      
      if (tabName === 'blog') {
        postsSection.classList.add('active');
        dateHeader.classList.remove('hidden');
      } else if (tabName === 'about') {
        aboutSection.classList.add('active');
        dateHeader.classList.add('hidden');
      } else if (tabName === 'project') {
        projectsSection.classList.add('active');
        dateHeader.classList.add('hidden');
      }
      sidebar.classList.remove('active');
    }

    // --- SETUP LISTENERS ---
    navTabsDesktop.forEach(tab => {
      tab.addEventListener('click', () => handleTabClick(tab.dataset.tab, tab));
    });

    document.getElementById('backBtn').addEventListener('click', closeSinglePost);
    
    // Logo Click = Home
    logoSection.addEventListener('click', () => location.reload());
    mobileLogoSection.addEventListener('click', () => location.reload());

    // Mobile Menu
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    mobileMenuToggle.addEventListener('click', () => sidebar.classList.toggle('active'));

    // Mobile Tabs Generation
    const tabs = ['BLOG', 'PROJECTS', 'ABOUT'];
    const tabNames = ['blog', 'project', 'about'];
    tabs.forEach((tab, idx) => {
      const btn = document.createElement('button');
      btn.className = `nav-tab ${idx === 0 ? 'active' : ''}`;
      btn.textContent = tab;
      btn.addEventListener('click', () => handleTabClick(tabNames[idx], btn));
      navTabsMobile.appendChild(btn);
    });

    // --- SEARCH ---
    function showSearchResults(query) {
      if (typeof posts === 'undefined') return;
      const filtered = posts.filter(p => p.title.toLowerCase().includes(query.toLowerCase()) || p.body.toLowerCase().includes(query.toLowerCase()));
      
      postsSection.classList.remove('active');
      singlePostView.classList.remove('active');
      aboutSection.classList.remove('active');
      projectsSection.classList.remove('active');
      searchResultsPage.classList.add('active');
      
      const list = document.getElementById('searchResultsList');
      list.innerHTML = '';
      if(filtered.length === 0) list.innerHTML = '<p>No results found.</p>';
      
      filtered.forEach(post => {
        const item = document.createElement('div');
        item.className = 'post-list-item';
        item.innerHTML = `<h2>${post.title}</h2><p>${post.excerpt}</p>`;
        item.addEventListener('click', () => openSinglePost(post));
        list.appendChild(item);
      });
    }

    searchInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') showSearchResults(searchInput.value.trim());
    });

    // --- DATES ---
    function getHijriDate() {
      const hijriMonths = ['Muharram', 'Safar', 'Rabi al-Awwal', 'Rabi al-Thani', 'Jumada al-Awwal', 'Jumada al-Thani', 'Rajab', "Sha'ban", 'Ramadan', 'Shawwal', 'Dhu al-Qadah', 'Dhu al-Hijjah'];
      const now = new Date();
      const hijriFormatter = new Intl.DateTimeFormat('en-US-u-ca-islamic', { day: 'numeric', month: 'numeric', year: 'numeric' });
      const parts = hijriFormatter.formatToParts(now);
      const day = parts.find(p => p.type === 'day')?.value;
      const month = parts.find(p => p.type === 'month')?.value;
      const year = parts.find(p => p.type === 'year')?.value;
      return `${hijriMonths[parseInt(month) - 1]} ${day}, ${year}`;
    }
    document.getElementById('hijriDate').textContent = getHijriDate();
    document.getElementById('gregorianDate').textContent = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });

    // --- MAILCHIMP & MODALS ---
    function subscribeToMailchimp(email, source) {
      alert('Subscription simulated! (Add your real API endpoint here if needed)');
      document.getElementById('thankYouModal').classList.add('active');
      document.getElementById('subscribeModal').classList.remove('active');
    }
    document.getElementById('subscribeBtn').addEventListener('click', () => {
      const email = document.getElementById('sidebarEmail').value;
      if(email) subscribeToMailchimp(email, 'sidebar');
    });
    document.getElementById('closeSubscribe').addEventListener('click', () => subscribeModal.classList.remove('active'));
    document.getElementById('closeThankYou').addEventListener('click', () => document.getElementById('thankYouModal').classList.remove('active'));

    // Check for ?post=ID in URL on load
    const urlParams = new URLSearchParams(window.location.search);
    const postId = urlParams.get('post');
    if (postId && typeof posts !== 'undefined') {
      const post = posts.find(p => p.id == postId);
      if (post) openSinglePost(post);
    } else {
      renderPosts();
    }
  </script>
</body>
</html>

