<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="preload" as="image" href="logoz.png">
  <title>Mission Seventy — The Laboratory</title>
  
  <meta property="og:type" content="website">
  <meta property="og:title" content="Mission Seventy">
  <meta property="og:description" content="Systems, Faith, and Software. The workshop of a builder.">
  <meta property="og:image" content="https://missionseventy.com/logoz.png">
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-D1KZK5NV5L"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-D1KZK5NV5L');
  </script>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="217b616f-3ce0-43cb-bb93-1dc5d77f1d18"></script>
  
  <style>
    /* --- SYSTEM VARIABLES --- */
    :root {
      --sidebar-bg: #111111;
      --sidebar-text: #e0e0e0;
      --canvas-bg: #f4f4f0; /* Warm paper white */
      --card-bg: #ffffff;
      --text-main: #1a1a1a;
      --text-muted: #666666;
      --accent: #FDB515; /* Mission Seventy Amber */
      --border: #e0e0e0;
      --line: rgba(0,0,0,0.1);
      
      --font-display: 'Helvetica Neue', Helvetica, Arial, sans-serif;
      --font-body: 'Georgia', serif;
      --font-mono: 'Courier New', Courier, monospace;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body { 
      background: var(--canvas-bg); 
      color: var(--text-main); 
      display: flex; 
      min-height: 100vh;
      font-family: var(--font-display);
    }

    /* --- THE CONTROL PANEL (SIDEBAR) --- */
    .sidebar {
      width: 300px;
      background: var(--sidebar-bg);
      color: var(--sidebar-text);
      height: 100vh;
      position: sticky;
      top: 0;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      padding: 40px 30px;
      border-right: 1px solid #333;
      z-index: 100;
      flex-shrink: 0;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 50px;
      cursor: pointer;
    }
    .brand img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      border: 2px solid var(--accent);
    }
    .brand-text h1 {
      font-size: 16px;
      font-weight: 700;
      color: #fff;
      letter-spacing: 0.5px;
      text-transform: uppercase;
    }
    .brand-text p {
      font-size: 11px;
      color: var(--accent);
      font-family: var(--font-mono);
      margin-top: 4px;
    }

    /* Navigation - System Style */
    .nav-menu { display: flex; flex-direction: column; gap: 4px; }
    .nav-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 0;
      color: #888;
      text-decoration: none;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 1px;
      text-transform: uppercase;
      border-bottom: 1px solid #222;
      transition: all 0.2s;
      cursor: pointer;
    }
    .nav-item:hover { color: #fff; padding-left: 10px; }
    .nav-item.active { color: var(--accent); border-bottom: 1px solid var(--accent); }
    .nav-num { font-family: var(--font-mono); font-size: 10px; opacity: 0.5; }

    /* Sidebar Footer */
    .sidebar-footer { margin-top: auto; }
    .status-widget {
      background: #1a1a1a;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
      border: 1px solid #333;
    }
    .status-label { font-size: 10px; color: #666; text-transform: uppercase; font-weight: 700; margin-bottom: 8px; font-family: var(--font-mono); }
    .status-value { font-size: 13px; color: #fff; line-height: 1.4; }
    
    .socials { display: flex; gap: 15px; margin-top: 20px; }
    .social-icon { color: #666; transition: 0.2s; }
    .social-icon:hover { color: var(--accent); }
    .social-icon svg { width: 18px; height: 18px; fill: currentColor; }

    /* --- THE WORKSPACE (MAIN CONTENT) --- */
    .workspace {
      flex: 1;
      height: 100vh;
      overflow-y: auto;
      padding: 60px 80px;
      position: relative;
      background-image: linear-gradient(var(--line) 1px, transparent 1px),
      linear-gradient(90deg, var(--line) 1px, transparent 1px);
      background-size: 40px 40px; /* Grid effect for engineering feel */
    }

    /* Mobile Toggle */
    .mobile-header { display: none; }

    /* Top Bar (Date & Search) */
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 60px;
      padding-bottom: 20px;
      border-bottom: 2px solid var(--text-main);
    }
    .date-display {
      font-family: var(--font-mono);
      font-size: 12px;
      color: var(--text-main);
      background: var(--accent);
      padding: 6px 12px;
      font-weight: 700;
    }
    .search-wrap input {
      background: transparent;
      border: none;
      border-bottom: 1px solid #ccc;
      padding: 8px;
      font-family: var(--font-mono);
      font-size: 14px;
      width: 200px;
      color: var(--text-main);
    }
    .search-wrap input:focus { outline: none; border-bottom: 1px solid var(--text-main); }

    /* --- SECTIONS --- */
    .section-title {
      font-size: 64px;
      font-weight: 800;
      line-height: 0.9;
      margin-bottom: 40px;
      letter-spacing: -2px;
      color: var(--text-main);
    }

    /* Log Feed (Blog) */
    .log-entry {
      background: var(--card-bg);
      border: 1px solid var(--text-main);
      padding: 30px;
      margin-bottom: 30px;
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
      position: relative;
    }
    .log-entry::after {
      content: '';
      position: absolute;
      top: 4px; left: 4px; right: -4px; bottom: -4px;
      background: var(--text-main);
      z-index: -1;
      transition: transform 0.2s;
    }
    .log-entry:hover { transform: translate(-2px, -2px); }
    .log-entry:hover::after { transform: translate(4px, 4px); }

    .entry-meta {
      font-family: var(--font-mono);
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 10px;
      text-transform: uppercase;
    }
    .entry-title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 12px;
      line-height: 1.2;
    }
    .entry-excerpt {
      font-family: var(--font-body);
      font-size: 17px;
      color: var(--text-muted);
      line-height: 1.6;
    }

    /* System Card (Product) */
    .system-card {
      background: var(--text-main);
      color: #fff;
      padding: 40px;
      margin-bottom: 50px;
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 30px;
      align-items: center;
    }
    .system-info h3 { font-size: 24px; margin-bottom: 10px; color: var(--accent); }
    .system-info p { opacity: 0.8; font-family: var(--font-mono); font-size: 13px; line-height: 1.6; max-width: 500px; }
    .system-action a {
      background: var(--accent);
      color: #000;
      text-decoration: none;
      padding: 15px 30px;
      font-weight: 700;
      font-size: 14px;
      display: inline-block;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .system-action a:hover { background: #fff; }

    /* Single Post View */
    .single-view { display: none; background: var(--card-bg); padding: 60px; border: 1px solid var(--border); max-width: 800px; margin: 0 auto; }
    .single-view.active { display: block; }
    .back-link { 
      display: inline-flex; align-items: center; gap: 8px;
      font-family: var(--font-mono); font-size: 12px; font-weight: 700; 
      color: var(--text-main); cursor: pointer; margin-bottom: 40px; 
      text-transform: uppercase;
    }
    .back-link:hover { color: var(--accent); }
    .article-body { font-family: var(--font-body); font-size: 20px; line-height: 1.8; color: #222; margin-top: 30px; }
    .article-body p { margin-bottom: 24px; }

    /* Projects Grid */
    .project-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; }
    .project-card {
      background: #fff; border: 1px solid var(--border); padding: 30px;
      display: flex; flex-direction: column; justify-content: space-between;
      height: 100%;
    }
    .project-card h3 { font-size: 22px; margin-bottom: 5px; }
    .project-tag { font-family: var(--font-mono); font-size: 11px; color: var(--accent); background: #111; padding: 2px 6px; display: inline-block; margin-bottom: 15px; }
    .project-desc { font-family: var(--font-body); font-size: 15px; color: var(--text-muted); margin-bottom: 20px; }
    .project-link { font-size: 13px; font-weight: 700; color: var(--text-main); text-decoration: none; border-bottom: 2px solid var(--accent); padding-bottom: 2px; align-self: flex-start; }

    /* Hidden Sections */
    #postsSection, #aboutSection, #projectsSection, #searchResultsPage { display: none; }
    #postsSection.active, #aboutSection.active, #projectsSection.active, #searchResultsPage.active { display: block; animation: fadeIn 0.4s ease; }
    
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* Responsive */
    @media (max-width: 900px) {
      body { flex-direction: column; }
      .sidebar { 
        width: 100%; height: auto; position: relative; padding: 20px; 
        border-right: none; border-bottom: 1px solid #333;
      }
      .workspace { padding: 40px 20px; height: auto; }
      .nav-menu { flex-direction: row; overflow-x: auto; gap: 20px; padding-bottom: 10px; }
      .nav-item { border-bottom: none; white-space: nowrap; }
      .nav-item.active { border-bottom: none; color: var(--accent); }
      .status-widget, .socials { display: none; } /* Hide footer items on mobile to save space */
      .system-card { grid-template-columns: 1fr; text-align: center; padding: 30px 20px; }
      .section-title { font-size: 42px; }
    }
  </style>
</head>
<body>

  <aside class="sidebar">
    <div>
      <div class="brand" id="logoClick">
        <img src="logoz.png" alt="M70">
        <div class="brand-text">
          <h1>Mission Seventy</h1>
          <p>LAB_STATUS: ACTIVE</p>
        </div>
      </div>

      <nav class="nav-menu">
        <div class="nav-item active" data-tab="blog">
          <span>Logbook</span>
          <span class="nav-num">01</span>
        </div>
        <div class="nav-item" data-tab="project">
          <span>Shipments</span>
          <span class="nav-num">02</span>
        </div>
        <div class="nav-item" data-tab="about">
          <span>Manifesto</span>
          <span class="nav-num">03</span>
        </div>
      </nav>
    </div>

    <div class="sidebar-footer">
      <div class="status-widget">
        <div class="status-label">Current Focus</div>
        <div class="status-value">Refining the "Seventy System" for public release.</div>
      </div>

      <div class="search-wrap-mobile">
        <div class="socials">
          <a href="https://twitter.com/missionseventy" target="_blank" class="social-icon"><svg viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg></a>
          <a href="https://www.instagram.com/missionseventy" target="_blank" class="social-icon"><svg viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg></a>
        </div>
      </div>
    </div>
  </aside>

  <main class="workspace">
    
    <div class="top-bar">
      <div class="search-wrap">
        <input type="text" id="searchInput" placeholder="SEARCH LOGS_">
      </div>
      <div class="date-display" id="dateDisplay">LOADING_DATE...</div>
    </div>

    <div id="postsSection" class="active">
      <h2 class="section-title">The Laboratory.</h2>
      
      <div class="system-card">
        <div class="system-info">
          <h3>The Seventy System</h3>
          <p>Never wonder what to post again. A 7x11 content framework designed for consistent output without burnout.</p>
        </div>
        <div class="system-action">
          <a href="#">Access System ($21)</a>
        </div>
      </div>

      <div id="postsFeed">
        </div>
    </div>

    <div id="projectsSection">
      <h2 class="section-title">Shipments.</h2>
      <div class="project-grid">
        <div class="project-card">
          <div>
            <span class="project-tag">LIVE</span>
            <h3>Qiblatak</h3>
            <p class="project-desc">A minimal, privacy-focused Qibla finder and prayer time utility. Built for focus.</p>
          </div>
          <a href="https://qiblatak.com" target="_blank" class="project-link">LAUNCH APP -></a>
        </div>
        <div class="project-card">
          <div>
            <span class="project-tag">BETA</span>
            <h3>Nurayni</h3>
            <p class="project-desc">Authentic Islamic wisdom and reflection. Nurturing Iman through the two lights.</p>
          </div>
          <span class="project-link">COMING SOON</span>
        </div>
      </div>
    </div>

    <div id="aboutSection">
      <h2 class="section-title">Manifesto.</h2>
      <div class="log-entry" style="cursor: default; transform: none;">
        <div class="article-body" style="margin-top: 0;">
          <p><strong>BISMILLAH.</strong></p>
          <p>Mission Seventy is a digital laboratory. It sits at the intersection of Deen, Design, and Systems.</p>
          <p>I am a builder. I write to think clearly. I build to solve problems. This site is where I document the process of making what matters work.</p>
          <p>Here you will find:</p>
          <ul style="margin-left: 20px; font-family: var(--font-mono); font-size: 14px; margin-bottom: 20px;">
            <li>> Systems for productivity</li>
            <li>> Reflections on faith</li>
            <li>> Software projects</li>
          </ul>
          <p>Welcome to the workshop.</p>
        </div>
      </div>
    </div>

    <div class="single-view" id="singlePostView">
      <div class="back-link" id="backBtn">
        <span>← Return to Log</span>
      </div>
      <div class="entry-meta" id="singlePostDate"></div>
      <h1 class="section-title" id="singlePostTitle" style="font-size: 42px; margin-bottom: 20px;"></h1>
      <div class="article-body" id="singlePostBody"></div>
      
      <div style="margin-top: 60px; border-top: 1px solid #ddd; padding-top: 20px;">
        <p style="font-family: var(--font-mono); font-size: 12px; color: #888;">END OF LOG.</p>
      </div>
    </div>

    <div id="searchResultsPage">
      <h2 class="section-title">Query Results.</h2>
      <div id="searchResultsList"></div>
      <div class="back-link" id="clearSearchBtn" style="margin-top: 20px;">CLEAR SEARCH</div>
    </div>

  </main>

  <script src="posts.js"></script>
  <script>
    // --- APP CONTROLLER ---
    const app = {
      views: {
        blog: document.getElementById('postsSection'),
        project: document.getElementById('projectsSection'),
        about: document.getElementById('aboutSection'),
        single: document.getElementById('singlePostView'),
        search: document.getElementById('searchResultsPage')
      },
      nav: document.querySelectorAll('.nav-item'),
      feed: document.getElementById('postsFeed'),
      dateEl: document.getElementById('dateDisplay')
    };

    // --- INITIALIZATION ---
    function init() {
      renderDate();
      renderFeed();
      setupListeners();
      checkUrlParams();
    }

    // --- DATE CALCULATOR ---
    function renderDate() {
      const now = new Date();
      // Hijri Calculation (Approximate)
      const hijriFormatter = new Intl.DateTimeFormat('en-US-u-ca-islamic', { day: 'numeric', month: 'short', year: 'numeric' });
      const hijri = hijriFormatter.format(now);
      const gregorian = now.toLocaleDateString('en-US', { day: 'numeric', month: 'short' }).toUpperCase();
      app.dateEl.textContent = `${gregorian} // ${hijri.toUpperCase()}`;
    }

    // --- FEED RENDERER ---
    function renderFeed() {
      if (typeof posts === 'undefined') {
        app.feed.innerHTML = '<div class="log-entry">Data Source Not Found. Check posts.js</div>';
        return;
      }

      app.feed.innerHTML = '';
      const validPosts = posts.filter(p => {
        // Date Logic here if needed
        return true; 
      }); // Add sorting if needed

      validPosts.forEach(post => {
        const el = document.createElement('div');
        el.className = 'log-entry';
        el.innerHTML = `
          <div class="entry-meta">LOG ID: #${post.id} // ${post.date}</div>
          <h3 class="entry-title">${post.title}</h3>
          <div class="entry-excerpt">${post.excerpt}</div>
        `;
        el.onclick = () => openPost(post);
        app.feed.appendChild(el);
      });
    }

    // --- NAVIGATION ---
    function switchTab(tabName) {
      // Update Sidebar
      app.nav.forEach(el => {
        el.classList.toggle('active', el.dataset.tab === tabName);
      });

      // Update View
      Object.values(app.views).forEach(el => el.classList.remove('active'));
      
      if(app.views[tabName]) {
        app.views[tabName].classList.add('active');
      }
      
      window.scrollTo(0,0);
    }

    function openPost(post) {
      Object.values(app.views).forEach(el => el.classList.remove('active'));
      app.views.single.classList.add('active');
      
      document.getElementById('singlePostTitle').textContent = post.title;
      document.getElementById('singlePostDate').textContent = `LOGGED ON: ${post.date}`;
      document.getElementById('singlePostBody').innerHTML = post.body;
      
      // Update URL State
      window.history.pushState({postId: post.id}, post.title, `?post=${post.id}`);
    }

    function closePost() {
      switchTab('blog');
      history.pushState(null, null, ' '); // Clear URL
    }

    // --- SEARCH ---
    function runSearch(query) {
      if(!query) return;
      Object.values(app.views).forEach(el => el.classList.remove('active'));
      app.views.search.classList.add('active');
      
      const results = posts.filter(p => p.title.toLowerCase().includes(query) || p.body.toLowerCase().includes(query));
      const list = document.getElementById('searchResultsList');
      list.innerHTML = '';
      
      if(results.length === 0) {
        list.innerHTML = '<p style="font-family:var(--font-mono)">NO MATCHES FOUND.</p>';
      } else {
        results.forEach(post => {
          const el = document.createElement('div');
          el.className = 'log-entry';
          el.innerHTML = `<h3 class="entry-title">${post.title}</h3><p class="entry-excerpt">${post.excerpt}</p>`;
          el.onclick = () => openPost(post);
          list.appendChild(el);
        });
      }
    }

    // --- LISTENERS ---
    function setupListeners() {
      // Nav Clicks
      app.nav.forEach(btn => {
        btn.addEventListener('click', () => switchTab(btn.dataset.tab));
      });

      // Logo Click
      document.getElementById('logoClick').addEventListener('click', () => {
        switchTab('blog');
      });

      // Back Button
      document.getElementById('backBtn').addEventListener('click', closePost);
      document.getElementById('clearSearchBtn').addEventListener('click', () => switchTab('blog'));

      // Search
      const searchInput = document.getElementById('searchInput');
      searchInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') runSearch(searchInput.value.toLowerCase());
      });
    }

    // --- URL CHECKER ---
    function checkUrlParams() {
      const urlParams = new URLSearchParams(window.location.search);
      const postId = urlParams.get('post');
      if (postId && typeof posts !== 'undefined') {
        const post = posts.find(p => p.id == postId);
        if (post) openPost(post);
      }
    }

    // Run
    init();

  </script>
</body>
</html>


